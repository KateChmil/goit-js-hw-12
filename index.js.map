{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst APIKEY = \"47458933-146f1ea8ad921328f8e999f88\";\nconst BASEURL = \"https://pixabay.com/api/\";\nconst PERPAGE = 15;\n\n\nexport async function fetchImages(request, page = 1) {\n  const params = {\n    key: APIKEY,\n    q: request,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    page,\n    per_page: PERPAGE,\n  };\n\n  try {\n    const response = await axios.get(BASEURL, { params });\n    return response.data\n   \n  } catch (error) {\n    toggleLoader(false);\n    iziToast.error({ title: \"Error\", message: \"Something went wrong. Please try again later.\" });\n }\n\n}","export function renderGallery(images) {\n    const gallery = document.querySelector(\"#gallery\");\n    const markup = images\n        .map(\n            ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n                return `\n                 <li> <a href=\"${largeImageURL}\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\" width=\"360px\" height=\"200px\" class=\"image\"/>\n                </a>\n                <div class = \"info\">\n                <div class=\"info-div\"> <p class=\"section\"> Likes: </p> <p class=\"result\" > ${likes} </p> </div>\n                <div class=\"info-div\"> <p class=\"section\"> Views: </p> <p class=\"result\"> ${views} </p> </div>\n                <div class=\"info-div\"> <p class=\"section\"> Comments: </p> <p class=\"result\"> ${comments} </p> </div>\n                <div class=\"info-div\"> <p class=\"section\"> Downloads: </p> <p class=\"result\"> ${downloads} </p> </div>\n                 </div>\n                </li>\n               `\n            }\n    )\n        .join(\"\")\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = \"\";\n}\n\nexport function toggleLoader(show) {\n    const loader = document.querySelector(\"#toggle-div\");\n    loader.classList.toggle(\"hidden\", !show)\n}\n\nexport function toggleMoreLoadButton(show) {\n   const loadMoreBtn = document.querySelector(\"#load-more\");\n    loadMoreBtn.classList.toggle(\"hidden\", !show)\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { fetchImages } from \"./js/pixabay-api.js\";\nimport { clearGallery, toggleLoader, renderGallery,toggleMoreLoadButton } from \"./js/render-functions.js\"\n\nconst searchForm = document.querySelector(\"#search-form\");\nconst sInput = document.querySelector(\"#search-input\");\nconst loadMoreBtn = document.querySelector(\"#load-more\");\nconst PERPAGE = 15;\n\nlet currentPage = 1;\n//let request = \"\";\n\nconst lightbox = new SimpleLightbox(\"#gallery a\", {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n\n\n\n\n\n\n\n\n\n\nsearchForm.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n\n    const request = sInput.value.trim();\n    if (!request) {\n        iziToast.error({ title: \"Error\", message: \"Search field cannot be empty!\" });\n    return;}\n     \n    clearGallery();\n    toggleMoreLoadButton(false);\n    toggleLoader(true);\n    //added here\n    const currentPage = 1;\n    \n\n      \n    try {\n        const data = await fetchImages(request, currentPage);\n        toggleLoader(false);\n        if (!data.hits.length) {\n              iziToast.warning({\n          title: \"No Results\",\n          message: \"Sorry, there are no images matching your search query. Please try again!\",\n        });\n            return;\n        };\n\n         renderGallery(data.hits)\n        lightbox.refresh();\n\n\n        if (currentPage * 15 < data.totalHits) {\n            toggleMoreLoadButton(true);\n         }\n    } catch (error) {\n   toggleLoader(false);\n    iziToast.error({ title: \"Error\", message: \"Something went wrong. Please try again later.\" })\n    }\n    \n})\n    \nloadMoreBtn.addEventListener(\"click\", async () => {\n    const request = sInput.value.trim();\n    currentPage += 1;\n    try {\n        const data = await fetchImages(request, currentPage);\n        renderGallery(data.hits);\n\n\n     const { height: cardHeight } = document\n      .querySelector(\".gallery li\")\n      .getBoundingClientRect();\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: \"smooth\",\n    });\n        \n        \n    if (currentPage * PERPAGE >= data.totalHits) {\n        toggleMoreLoadButton(false);\n        iziToast.info({ title: \"End of Results\", message: \"We`re sorry, but you`ve reached the end of search results.\" });\n    }\n    } catch (error) {\n        toggleLoader(false);\n    iziToast.error({ title: \"Error\", message: \"Something went wrong. Please try again later.\" })\n    }\n    \n})\n\n\n\n\n\n"],"names":["APIKEY","BASEURL","PERPAGE","fetchImages","request","page","params","axios","renderGallery","images","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","toggleLoader","show","toggleMoreLoadButton","searchForm","sInput","loadMoreBtn","currentPage","lightbox","SimpleLightbox","event","iziToast","data","cardHeight"],"mappings":"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"}